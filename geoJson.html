<!DOCTYPE html>
<html lang="tw">
   <head>
      <meta http-equiv="Content-Language" content="zh-tw">
      <meta http-equiv="Content-type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">
      <title>🌰 Google Map Application</title>
      <link href="css/public.css" rel="stylesheet" type="text/css">
      <link href="css/icon.css" rel="stylesheet" type="text/css">
      <script src="js/jquery_v1.10.2/jquery-1.10.2.min.js" language="javascript" type="text/javascript"></script><script src="js/public.js" language="javascript" type="text/javascript"></script>
   </head>
   <body lang="zh-tw">
      <div id="logo">by Chestnut Wu</div>
      <div id="sidemenu"></div>
      <div class="container">
        <div class="subject">使用GeoJson</div>
        <div class="folder">資料處理</div>
        <h3>了解GeoJson</h3>
        <p>什麼是GeoJson：<a class="show" href="http://www.oxxostudio.tw/articles/201803/google-maps-14-geojson.html"></a></p>
        <p>GeoJson-TopoJson轉換器：<a class="show" href="http://jeffpaine.github.io/geojson-topojson/"></a></p>

        <h3>地圖上顯示geoJson資料</h3>
        <p>Step1. 呼叫map.data物件loadGeoJson</p>
        <p>Step2. 產生GeoJson：<a class="show" href="http://geojson.io/#map=3/38.00/24.08"></a></p>
        <p>Step3. 重新設定樣式 Data.setStyle()</p>

        <pre class="prettyprint"><code class="language-js">
      $map = new google.maps.Map( document.getElementById('map'), {
        zoom: 16,
        center: {lat: 25.042, lng: 121.55790,}
      });
      $map.data.loadGeoJson('document/json/demo.geojson.json');
      //使用json內的設定值
      $map.data.setStyle(function(feature){
        return {
          strokeWeight: feature.getProperty('stroke-width'),
          strokeOpacity: feature.getProperty('stroke-opacity'),
          strokeColor: feature.getProperty('stroke'),
          fillColor: feature.getProperty('fill'),
          fillOpacity: feature.getProperty('fill-opacity')
        }
      });
        </code></pre>
        <div class="map" id="map"></div>
      </div>
      <script>
        var $map;
        function initMap() {
          $map = new google.maps.Map( document.getElementById('map'), {
            zoom: 16,
            center: {lat: 25.042, lng: 121.55790,}
          });
          $map.data.loadGeoJson('document/json/demo.geojson.json');
          //使用json內的設定值
          $map.data.setStyle(function(feature){
            return {
              strokeWeight: feature.getProperty('stroke-width'),
              strokeOpacity: feature.getProperty('stroke-opacity'),
              strokeColor: feature.getProperty('stroke'),
              fillColor: feature.getProperty('fill'),
              fillOpacity: feature.getProperty('fill-opacity')
            }
          });
          //一次設定固定資料
          // $map.data.setStyle({
          //   strokeWeight: 15,
          //   strokeOpacity: .5,
          //   strokeColor: '#f00',
          //   fillColor: '#0c0',
          //   fillOpacity: .35
          // });
        }
      </script>
      <script async defer="defer" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeXLUmJBsHsbllQA-APXny49W_HJC41gY&callback=initMap"></script><script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=desert"></script>
    </body>
    </html>
